<div class="tile-section" style="color: {{ section.settings.text_color }};">
    <div class="section-small general-section">
        <div class="tile-section__top">
            <div class="tile-section__top--left">
                <div class="tile-section__top--left-inner">
                    {% if section.settings.heading != blank %}
                    <h2 class="tile-section__heading t-large--secondary">
                        {{ section.settings.heading }}
                    </h2>
                    {% endif %}

                    {% if product.metafields.custom.product_summary != blank %}
                    <p class="tile-section__text t-small">
                        {{ product.metafields.custom.product_summary }}
                    </p>
                    {% endif %}

                    {% if section.settings.text != blank %}
                    <p class="tile-section__text t-small">
                        {{ section.settings.text }}
                    </p>
                    {% endif %}
                </div>
            </div>
            <div class="tile-section__right">
                {% if section.settings.button_link != blank %}
                <a href="{{ section.settings.button_link }}" class="b--custom {{section.settings.button_style}}">
                    {{ section.settings.button_text }}
                </a>
                {% elsif section.settings.to_location_selector %}
                <button class="b--custom {{section.settings.button_style}} popup-trigger-button">{{section.settings.button_text}}</button>
                {% endif %}
            </div>
        </div>
        <div class="tile-section__grid">
            {% for product in section.settings.collection.products  limit:5 %}
                <div class="tile-section__child">
                    <a href="{{ product.url }}">
                      <img class="sp-mb-1" src="{{ product.featured_image | img_url: '850x530', crop: 'center' }}">
                    </a>
                    <div class="tile-section__content">
                        <h3 class="tile-section__title t-medium sp-mb-2">{{ product.title}}</h3>
                        <p class="tile-section__text t-small">{{ product.metafields.custom.product_summary }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

{% schema %}
  {
    "name": {
      "en": "Tile Section"
    },
    "class": "index-section index-section--tile",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Section Heading",
        "default": "Lorem Ipsum"
      },
      {
        "type": "text",
        "id": "text",
        "label": "Text",
        "default": "Lorem Ipsum"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button Text",
        "default": "VIEW ALL"
      },
      {
        "type": "url",
        "id": "button_link",
        "label": "Button Link"
      },
      {
        "type": "checkbox",
        "id": "to_location_selector",
        "label": "Make button To Location Trigger",
        "default": false
      },
      {
        "type": "select",
        "id": "button_style",
        "label": "Button style",
        "options": [
          {
            "value": "b--primary",
            "label": "Primary"
          },
          {
            "value": "b--secondary",
            "label": "Secondary"
          }
        ],
        "default": "b--primary"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text Color"
      }
    ],
    "presets": [
    {
      "name": "Tile Section",
      "category": "Advanced layout"
    }
  ]
  }
{% endschema %}
  